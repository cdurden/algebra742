<div class="literally"></div>
<div class="tools">
  <a id="tool-pencil">pencil</a>
  |
  <a id="tool-eraser">eraser</a>
</div>

<!-- replace window.LC with core build version -->
<script src="{{ url_for('static',filename='js/literallycanvas-0.4.14/js/literallycanvas-core.js') }}"></script>
<script src="{{ url_for('static', filename='js/ResizeSensor.js') }}"></script>

<script>
function resizeCanvasToDisplaySize(canvas) {
   console.log(canvas);
   // look up the size the canvas is being displayed
   const width = canvas.clientWidth;
   const height = canvas.clientHeight;

   // If it's resolution does not match change it
   if (canvas.width !== width || canvas.height !== height) {
     canvas.width = width;
     canvas.height = height;
     return true;
   }

   return false;
}
$(document).ready(function(){
    $('.literally').each(function () {
        var container = this;
        var lc = LC.init(container);
        var scale = 2.0;
        $(container).find('canvas').each(function() {
            new ResizeSensor(this, function(){ 
                //LC.util.matchElementSize(container, this, LC.util.getBackingScale());
                LC.util.matchElementSize(container, this, scale);
                //resizeCanvasToDisplaySize(canvas); 
                console.log('content dimension changed');
            });
            //LC.util.matchElementSize(container, $(container).find('canvas'), LC.util.getBackingScale());
            LC.util.matchElementSize(container, $(container).find('canvas'), scale);
            console.log('content dimension changed');
        });
        //resizeCanvasToDisplaySize(this) 
        <!-- custom UI example... -->
        var tools = [
          {
            name: 'pencil',
            el: document.getElementById('tool-pencil'),
            tool: new LC.tools.Pencil(lc)
          },
          {
            name: 'eraser',
            el: document.getElementById('tool-eraser'),
            tool: new LC.tools.Eraser(lc)
          }
        ];
    
        var activateTool = function(t) {
            lc.setTool(t.tool);
    
            tools.forEach(function(t2) {
              if (t == t2) {
                t2.el.style.backgroundColor = 'yellow';
              } else {
                t2.el.style.backgroundColor = 'transparent';
              }
            });
        }
    
        tools.forEach(function(t) {
          t.el.style.cursor = "pointer";
          t.el.onclick = function(e) {
            e.preventDefault();
            activateTool(t);
          };
        });
        activateTool(tools[0]);
    });
});

</script>
